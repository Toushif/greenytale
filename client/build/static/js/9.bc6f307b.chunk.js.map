{"version":3,"sources":["views/seller/index.js"],"names":["Seller","props","state","pageLoading","errorMsg","productsList","className","userImg","userDetails","this","context","imgUrl","setState","window","scrollTo","getSellerProducts","user_ID","console","log","buffer","binary","bytes","Uint8Array","len","byteLength","i","String","fromCharCode","btoa","seller_ID","a","Core","sellerProducts","res","store","map","item","ind","imga","arrayBufferToBase64","image_buffer","data","to","title","src","alt","product_name","unit_price","product_material","recycling_code","created_dt","substr","indexOf","htmlFor","type","name","id","value","quantity","handleError","full_name","email","style","display","Component"],"mappings":"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","file":"static/js/9.bc6f307b.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport Core from \"../../services/core\";\r\nimport handleError from \"../../services/errorHandler\";\r\nimport Loading from \"components/loader/index\";\r\nimport \"./index.scss\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass Seller extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            pageLoading: false,\r\n            errorMsg: \"\",\r\n            productsList: <div className=\"no=products\">You do not have any items to sell right now. Click the 'Upload Items' button to strat uploading.</div>,\r\n            userImg: \"https://img.icons8.com/bubbles/100/000000/user.png\",\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { userDetails } = this.props.context;\r\n        if (userDetails.imgUrl) {\r\n            this.setState({ userImg: userDetails.imgUrl });\r\n        }\r\n        window.scrollTo(0, 150);\r\n\r\n        this.getSellerProducts(userDetails.user_ID)\r\n        console.log(\"prps\", this.props.context, this.props.context.userDetails);\r\n    }\r\n\r\n    arrayBufferToBase64( buffer ) {\r\n        let binary = '';\r\n        const bytes = new Uint8Array( buffer );\r\n        const len = bytes.byteLength;\r\n        for (let i = 0; i < len; i++) {\r\n            binary += String.fromCharCode( bytes[ i ] );\r\n        }\r\n        return window.btoa( binary );\r\n\r\n    }\r\n\r\n    async getSellerProducts(seller_ID) {\r\n        this.setState({ pageLoading: true });\r\n        try {\r\n            const res = await Core.sellerProducts({seller_ID});\r\n            if (res) {\r\n                this.setState({ errorMsg: \"\" });\r\n                const store = res.map((item, ind) => {\r\n                    const buffer = this.arrayBufferToBase64(item?.image_buffer?.data);\r\n                    const imga = 'data:image/png;base64,' + buffer\r\n                    return (\r\n                        <div className=\"col-6 product-ind\" key={ind}>\r\n                            <div className=\"product\">\r\n                                <Link to=\"/product\" title=\"Product\">\r\n                                    <div className=\"image-box\">\r\n                                        <div className=\"images\">\r\n                                            <img\r\n                                                src={imga}\r\n                                                alt=\"product_img\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                                <div className=\"text-box\">\r\n                                    <h2 className=\"item\">{item.product_name}</h2>\r\n                                    <h3 className=\"price\">{item.unit_price}</h3>\r\n                                    <p className=\"description\">Materials used: {item.product_material}</p>\r\n                                    <p className=\"description\">Recycling code: {item.recycling_code}</p>\r\n                                    <p className=\"description\">Item uploaded on: {item.created_dt.substr(0, item.created_dt.indexOf('T'))}</p>\r\n                                    <label htmlFor=\"item-1-quantity\">Quantity: </label>\r\n                                    <input type=\"number\" name=\"item-1-quantity\" id=\"item-1-quantity\" value={item.quantity} />\r\n                                    <button type=\"button\" name=\"item-1-button\" id=\"item-1-button\">Add to Cart</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                })\r\n                this.setState({productsList: store})\r\n\r\n                console.log('res', res)\r\n            }\r\n        } catch (error) {\r\n            this.setState({ errorMsg: \"Error fetching products list\" });\r\n            handleError(error);\r\n        }\r\n        this.setState({ pageLoading: false });\r\n    }\r\n\r\n    render() {\r\n        const { userDetails } = this.props.context;\r\n\r\n        return (\r\n            <div className=\"seller-page\">\r\n                {this.state.pageLoading ? <Loading /> : \"\"}\r\n                <h1 className=\"page-settings-header\">Seller Account</h1>\r\n                <div className=\"page-content page-container\" id=\"page-content\">\r\n                    <div className=\"row d-flex justify-content-center\">\r\n                        <div className=\"seller-inner-wrapper\">\r\n                            <div className=\"card user-card-full\">\r\n                                <div className=\"row m-l-0 m-r-0\">\r\n                                    <div className=\"col-sm-4 bg-c-lite-green user-profile\">\r\n                                        <div className=\"card-block text-center text-white\">\r\n                                            <div className=\"m-b-25\">\r\n                                                <img\r\n                                                    src={this.state.userImg}\r\n                                                    className=\"img-radius\"\r\n                                                    alt=\"User-Profile-Image\"\r\n                                                />\r\n                                            </div>\r\n                                            <h6 className=\"f-w-600\">\r\n                                                {userDetails.full_name}\r\n                                            </h6>\r\n                                            <p>GreenyTale Seller</p>\r\n                                            <p>{userDetails.email}</p>\r\n                                            <p>\r\n                                                Joined:{\" \"}\r\n                                                {userDetails.created_dt.substr(\r\n                                                    0,\r\n                                                    userDetails.created_dt.indexOf(\r\n                                                        \"T\"\r\n                                                    )\r\n                                                )}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"col-sm-8\">\r\n                                        <div className=\"card-block\">\r\n                                            <h6 style={{display: 'inline-block'}} className=\"m-b-20 p-b-5 b-b-default f-w-600\">\r\n                                                List of all products\r\n                                            </h6>\r\n                                            <button \r\n                                                className=\"btn btn-success upload-products\">\r\n                                                <Link to=\"seller-upload\">Upload Items</Link>\r\n                                            </button>\r\n                                            <hr />\r\n                                            <div className=\"row listing-section\">\r\n                                                {this.state.productsList}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Seller;\r\n"],"sourceRoot":""}